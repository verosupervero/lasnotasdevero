{{- $d := . -}}
{{- $url      := default "#" $d.url -}}
{{- $title    := default "Recursos" $d.title -}}
{{- $subtitle := $d.subtitle -}}
{{- $variant  := lower (default "card" $d.variant) -}}
{{- $size     := lower (default "md"   $d.size) -}}
{{- $class    := $d.class -}}
{{- $newtab   := or (eq $d.newtab true) (eq $d.newtab "true") -}}
{{- $target   := cond $newtab "_blank" "_self" -}}
{{- $rel      := cond $newtab "noopener" "" -}}

<a href="{{ $url }}" target="{{ $target }}" rel="{{ $rel }}"
   class="dev-card dev-card--{{ $variant }} dev-{{ $size }} {{ $class }}">

{{/* --- Icono izquierdo --- */}}
{{ with $d.icon_left }}
  <span class="dev-card__left" aria-hidden="true">
    {{- $raw := . -}}
    {{- $val := lower $raw -}}
    {{- $isAbs := or (hasPrefix $raw "http://") (hasPrefix $raw "https://") -}}
    {{- $isPath := or (hasSuffix $val ".svg") (hasSuffix $val ".png") (hasPrefix $raw "/") (hasPrefix $raw "http") -}}
    
    {{ if $isPath }}
      <img class="dev-ico"
           src="{{ if $isAbs }}{{ $raw }}{{ else }}{{ $raw | relURL }}{{ end }}"
           alt="icono">
    {{ else if eq $val "bible" }}
      <!-- Biblia abierta con cruz - diseño fiel al original -->
     <!-- Biblia abierta con cruz - exactamente como la imagen original -->
<svg class="dev-ico dev-ico--bible" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"
           role="img" aria-label="Biblia">
        <g fill="none" stroke="currentColor" stroke-width="2.2"
           stroke-linecap="round" stroke-linejoin="round">
          <!-- Página izquierda -->
          <path d="M4 4h8c0 0 0 2 0 2v12c0 1-1 2-2 2H4c-1 0-2-1-2-2V6c0-1 1-2 2-2z"/>
          
          <!-- Página derecha -->  
          <path d="M20 4h-8c0 0 0 2 0 2v12c0 1 1 2 2 2h6c1 0 2-1 2-2V6c0-1-1-2-2-2z"/>
          
          <!-- Unión central del libro -->
          <path d="M12 4v16"/>
          
          <!-- Curvatura suave que muestra que está abierto -->
          <path d="M10 20c1-1 1-1 2-1s1 0 2 1"/>
          
          <!-- Cruz -->
          <path d="M12 8v4"/>
          <path d="M10 10h4"/>
        </g>
      </svg>
    {{ else if eq $val "book" }}
      <!-- Alternativa 'book' simple -->
      <svg class="dev-ico dev-ico--book" viewBox="0 0 24 24"
           xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor"
           stroke-width="1.7" stroke-linecap="round" stroke-linejoin="round">
        <path d="M4 5h10a3 3 0 0 1 3 3v11H7a3 3 0 0 0-3 3V6a1 1 0 0 1 1-1z"/>
        <path d="M17 5H7a3 3 0 0 0-3 3"/>
      </svg>
    {{ end }}
  </span>
{{ end }}


  

  <span class="dev-card__content">
    <span class="dev-card__title">{{ $title }}</span>
    {{ with $subtitle }}<span class="dev-card__subtitle">{{ . }}</span>{{ end }}
  </span>

{{/* --- Icono derecho --- */}}
{{ with $d.icon_right }}
  <span class="dev-card__right" aria-hidden="true">
    {{- $raw := . -}}
    {{- $val := lower $raw -}}
    {{- $isAbs := or (hasPrefix $raw "http://") (hasPrefix $raw "https://") -}}

    {{- if or (hasSuffix $val ".svg") (hasSuffix $val ".png") (hasPrefix $val "/") (hasPrefix $val "http") -}}
    <img class="dev-ico dev-ico--drive"
     src="{{ if $isAbs }}{{ $raw }}{{ else }}{{ $raw | relURL }}{{ end }}"
     alt="Google Drive">
    {{ else if eq $val "drive" }}
      <!-- usa tu archivo local oficial -->
      <img class="dev-ico dev-ico--drive"
           src="/icons/google-drive.svg"
           alt="Google Drive">
    {{ end }}
  </span>
{{ end }}


</a>
